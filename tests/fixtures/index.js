'use string'

var nock = require('nock')
var config = require('../../config')
var fs = require('fs')

module.exports.dataPackage = require('./demo-package/datapackage.json')
module.exports.readme = fs.readFileSync('tests/fixtures/demo-package/README.md').toString()

module.exports.initMocks = function() {
  var data = module.exports
  nock(config.get('bitstoreBaseUrl'))
    .persist()
    .get('/metadata/admin/demo-package/_v/latest/datapackage.json')
    .reply(200, data.dataPackage, {'access-control-allow-origin': '*'})
    .get('/metadata/admin/demo-package/_v/latest/README.md')
    .reply(200, data.readme, {'access-control-allow-origin': '*'})
    .get('/metadata/core/s-and-p-500-companies/_v/latest/datapackage.json')
    .reply(200, data.dataPackage, {'access-control-allow-origin': '*'})
    .get('/metadata/core/s-and-p-500-companies/_v/latest/README.md')
    .reply(200, data.readme, {'access-control-allow-origin': '*'})
    .get('/metadata/core/house-prices-us/_v/latest/datapackage.json')
    .reply(200, data.dataPackage, {'access-control-allow-origin': '*'})
    .get('/metadata/core/house-prices-us/_v/latest/README.md')
    .reply(200, data.readme, {'access-control-allow-origin': '*'})
    .get('/metadata/core/gold-prices/_v/latest/datapackage.json')
    .reply(200, data.dataPackage, {'access-control-allow-origin': '*'})
    .get('/metadata/core/gold-prices/_v/latest/README.md')
    .reply(200, data.readme, {'access-control-allow-origin': '*'})
    .get('/metadata/examples/simple-graph-spec/_v/latest/datapackage.json')
    .reply(200, data.dataPackage, {'access-control-allow-origin': '*'})
    .get('/metadata/examples/simple-graph-spec/_v/latest/README.md')
    .reply(200, data.readme, {'access-control-allow-origin': '*'})
    .get('/metadata/examples/vega-views-tutorial-lines/_v/latest/datapackage.json')
    .reply(200, data.dataPackage, {'access-control-allow-origin': '*'})
    .get('/metadata/examples/vega-views-tutorial-lines/_v/latest/README.md')
    .reply(200, data.readme, {'access-control-allow-origin': '*'})
    .get('/metadata/examples/geojson-tutorial/_v/latest/datapackage.json')
    .reply(200, data.dataPackage, {'access-control-allow-origin': '*'})
    .get('/metadata/examples/geojson-tutorial/_v/latest/README.md')
    .reply(200, data.readme, {'access-control-allow-origin': '*'})
}
